{"ast":null,"code":"import{useState}from'react';import{useParams,useLoaderData}from'react-router-dom';import axios from'axios';import CommentsList from'../CommentsList';import AddCommentForm from'../AddCommentForm';import items from'../items-content';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ArticlePage(){const{name}=useParams();const{upvotes:initialUpvotes,comments:initialComments}=useLoaderData();const[upvotes,setUpvotes]=useState(initialUpvotes);const[comments,setComments]=useState(initialComments);const item=items.find(a=>a.name===name);async function onUpvoteClicked(){const response=await axios.post('/api/items/'+name+'/upvote');const updatedItemData=response.data;setUpvotes(updatedItemData.upvotes);}async function onAddComment(_ref){let{nameText,commentText}=_ref;const response=await axios.post('/api/items/'+name+'/comments',{postedBy:nameText,text:commentText});const updatedItemData=response.data;setComments(updatedItemData.comments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:item.title}),/*#__PURE__*/_jsx(\"button\",{onClick:onUpvoteClicked,children:\"Upvote\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"This item has \",upvotes,\" upvotes\"]}),item.content.map(p=>/*#__PURE__*/_jsx(\"p\",{children:p},p)),/*#__PURE__*/_jsx(AddCommentForm,{onAddComment:onAddComment}),/*#__PURE__*/_jsx(CommentsList,{comments:comments})]});}export async function loader(_ref2){let{params}=_ref2;const response=await axios.get('/api/items/'+params.name);const{upvotes,comments}=response.data;return{upvotes,comments};}","map":{"version":3,"names":["useState","useParams","useLoaderData","axios","CommentsList","AddCommentForm","items","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ArticlePage","name","upvotes","initialUpvotes","comments","initialComments","setUpvotes","setComments","item","find","a","onUpvoteClicked","response","post","updatedItemData","data","onAddComment","_ref","nameText","commentText","postedBy","text","children","title","onClick","content","map","p","loader","_ref2","params","get"],"sources":["C:/Users/picke/Documents/GitHub/UONCommunityMarketplace/front-end/src/pages/ItemPage.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useParams, useLoaderData } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport CommentsList from '../CommentsList';\r\nimport AddCommentForm from '../AddCommentForm';\r\nimport items from '../items-content';\r\n\r\nexport default function ArticlePage() {\r\n  const { name } = useParams();\r\n  const { upvotes: initialUpvotes, comments: initialComments } = useLoaderData();\r\n  const [upvotes, setUpvotes] = useState(initialUpvotes);\r\n  const [comments, setComments] = useState(initialComments);\r\n\r\n  const item = items.find(a => a.name === name);\r\n\r\n  async function onUpvoteClicked() {\r\n    const response = await axios.post('/api/items/' + name + '/upvote');\r\n    const updatedItemData = response.data;\r\n    setUpvotes(updatedItemData.upvotes);\r\n  }\r\n\r\n  async function onAddComment({ nameText, commentText }) {\r\n    const response = await axios.post('/api/items/' + name + '/comments', {\r\n      postedBy: nameText,\r\n      text: commentText,\r\n    });\r\n    const updatedItemData = response.data;\r\n    setComments(updatedItemData.comments);\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <h1>{item.title}</h1>\r\n    <button onClick={onUpvoteClicked}>Upvote</button>\r\n    <p>This item has {upvotes} upvotes</p>\r\n    {item.content.map(p => <p key={p}>{p}</p>)}\r\n    <AddCommentForm onAddComment={onAddComment} />\r\n    <CommentsList comments={comments} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport async function loader({ params }) {\r\n  const response = await axios.get('/api/items/' + params.name);\r\n  const { upvotes, comments } = response.data;\r\n  return { upvotes, comments };\r\n}"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,SAAS,CAAEC,aAAa,KAAQ,kBAAkB,CAC3D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,YAAY,KAAM,iBAAiB,CAC1C,MAAO,CAAAC,cAAc,KAAM,mBAAmB,CAC9C,MAAO,CAAAC,KAAK,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAErC,cAAe,SAAS,CAAAC,WAAWA,CAAA,CAAG,CACpC,KAAM,CAAEC,IAAK,CAAC,CAAGb,SAAS,CAAC,CAAC,CAC5B,KAAM,CAAEc,OAAO,CAAEC,cAAc,CAAEC,QAAQ,CAAEC,eAAgB,CAAC,CAAGhB,aAAa,CAAC,CAAC,CAC9E,KAAM,CAACa,OAAO,CAAEI,UAAU,CAAC,CAAGnB,QAAQ,CAACgB,cAAc,CAAC,CACtD,KAAM,CAACC,QAAQ,CAAEG,WAAW,CAAC,CAAGpB,QAAQ,CAACkB,eAAe,CAAC,CAEzD,KAAM,CAAAG,IAAI,CAAGf,KAAK,CAACgB,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACT,IAAI,GAAKA,IAAI,CAAC,CAE7C,cAAe,CAAAU,eAAeA,CAAA,CAAG,CAC/B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,IAAI,CAAC,aAAa,CAAGZ,IAAI,CAAG,SAAS,CAAC,CACnE,KAAM,CAAAa,eAAe,CAAGF,QAAQ,CAACG,IAAI,CACrCT,UAAU,CAACQ,eAAe,CAACZ,OAAO,CAAC,CACrC,CAEA,cAAe,CAAAc,YAAYA,CAAAC,IAAA,CAA4B,IAA3B,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAAF,IAAA,CACnD,KAAM,CAAAL,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,IAAI,CAAC,aAAa,CAAGZ,IAAI,CAAG,WAAW,CAAE,CACpEmB,QAAQ,CAAEF,QAAQ,CAClBG,IAAI,CAAEF,WACR,CAAC,CAAC,CACF,KAAM,CAAAL,eAAe,CAAGF,QAAQ,CAACG,IAAI,CACrCR,WAAW,CAACO,eAAe,CAACV,QAAQ,CAAC,CACvC,CAEA,mBACEP,KAAA,CAAAE,SAAA,EAAAuB,QAAA,eACA3B,IAAA,OAAA2B,QAAA,CAAKd,IAAI,CAACe,KAAK,CAAK,CAAC,cACrB5B,IAAA,WAAQ6B,OAAO,CAAEb,eAAgB,CAAAW,QAAA,CAAC,QAAM,CAAQ,CAAC,cACjDzB,KAAA,MAAAyB,QAAA,EAAG,gBAAc,CAACpB,OAAO,CAAC,UAAQ,EAAG,CAAC,CACrCM,IAAI,CAACiB,OAAO,CAACC,GAAG,CAACC,CAAC,eAAIhC,IAAA,MAAA2B,QAAA,CAAYK,CAAC,EAALA,CAAS,CAAC,CAAC,cAC1ChC,IAAA,CAACH,cAAc,EAACwB,YAAY,CAAEA,YAAa,CAAE,CAAC,cAC9CrB,IAAA,CAACJ,YAAY,EAACa,QAAQ,CAAEA,QAAS,CAAE,CAAC,EAClC,CAAC,CAEP,CAEA,MAAO,eAAe,CAAAwB,MAAMA,CAAAC,KAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,KAAA,CACrC,KAAM,CAAAjB,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACyC,GAAG,CAAC,aAAa,CAAGD,MAAM,CAAC7B,IAAI,CAAC,CAC7D,KAAM,CAAEC,OAAO,CAAEE,QAAS,CAAC,CAAGQ,QAAQ,CAACG,IAAI,CAC3C,MAAO,CAAEb,OAAO,CAAEE,QAAS,CAAC,CAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}